
@{
    ViewBag.Title = "UserList";
}

<script>

    function Edit(a) {
        debugger;
        localStorage["Id"] = a;
        window.open("https://localhost:44378/Users/AddUser", "_self");

    }

    function Delete(a) {
        debugger;
        localStorage["GetId"] = a;

        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!',
        }).then(function (result) {
            if (result.isConfirmed) {

                var GetId = localStorage["GetId"];

                $.ajax({
                    url: 'https://localhost:44378/Users/DeleteUser',
                    type: 'POST',
                    data: { Id: GetId },
                    success: function (data) {
                        debugger;
                        localStorage.removeItem("GetId");
                        Swal.fire(
                            'Deleted!',
                            'Your file has been deleted.',
                            'success'
                        ).then(function (get) {
                            if (get.isConfirmed) {
                                location.reload();
                            }
                        });
                    },
                    error: function () {
                        swalWithBootstrapButtons.fire(
                            'Cancelled',
                            ':)',
                            'error'
                        )
                    }
                     
                });

            }
              else if (result.dismiss === Swal.DismissReason.cancel) {
                swalWithBootstrapButtons.fire(
                    'Cancelled',
                    ':)',
                    'error'
                )
            }
        })
        
    }

    function confirmDelete() {
        var GetId = localStorage["GetId"];

        $.ajax({
            url: '/Users/DeleteUser',
            type: 'POST',
            data: { Id: GetId },
            success: function (data) {
                debugger;
                // window.open("/Users/UserProfile", "_self");
                localStorage.removeItem("GetId");
            }
        });

        location.reload();
        localStorage.removeItem("GetId");
    }

    $(document).ready(function (data) {

        debugger;
        $('#table').DataTable({
            responsive: true,
            "ajax": 'https://localhost:44378/Users/GetUserProfileList',
            "dataSrc": '',
            "columns": [
                { "data": "Id", className: "text-center" },
                { "data": "FirstName", className: "text-center" },
                { "data": "UserName", className: "text-center" },
                { "data": "Email", className: "text-center" },
                { "data": "PhoneNo", className: "text-center" },
                { "data": "IsActive", className: "text-center" },
                { "data": "Action", className: "text-center" }

            ],
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'copyHtml5',
                    text: '<i class="fa fa-files-o hoverback" style="color:blue;font-size: 20px;"></i>',
                    titleAttr: 'Copy'
                },
                {
                    extend: 'excelHtml5',
                    text: '<i class="fa fa-file-excel-o hoverback" style="color:green;font-size: 20px;"></i>',
                    titleAttr: 'Excel'
                },
                {
                    extend: 'csvHtml5',
                    text: '<i class="fa fa-file-text-o hoverback" style="color:purple;font-size: 20px;"></i>',
                    titleAttr: 'CSV'
                },
                {
                    extend: 'pdfHtml5',
                    text: '<i class="fa fa-file-pdf-o hoverback" style="color:red;font-size: 20px;"></i>',
                    titleAttr: 'PDF'
                }
            ]

        });

    });

</script>

<div class="row">
    <div class="col-sm-12">
        <div class="page-title-box">
            <div class="float-end">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="#">Metrica</a>
                    </li><!--end nav-item-->
                    <li class="breadcrumb-item">
                        <a href="#">Hospital</a>
                    </li><!--end nav-item-->
                    <li class="breadcrumb-item active">Add User</li>
                </ol>
            </div>
            <h4 class="page-title">All Users</h4>
        </div><!--end page-title-box-->
    </div><!--end col-->
</div>

<div class="row">
    @*<div class="row">*@
        <div class="col">
            <a class="btn btn-primary btn-sm px-4 my-2" href="@Url.Action("AddUser", "Users")">+ Add New</a>
        </div>
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="table" class="display" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>FirstName</th>
                                        <th>UserName</th>
                                        <th>Email</th>
                                        <th>PhoneNo</th>
                                        <th>IsActive</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>

                    </div><!--end card-body-->
                    @*<div class="row">
                            <div class="col">
                                <a class="btn btn-outline-light btn-sm px-4" href="@Url.Action("AddNewUser", "Users")">+ Add New</a>
                            </div>
                        </div*@><!--end row-->
                </div><!--end card-->
            </div> <!--end col-->
        </div><!--end row-->
